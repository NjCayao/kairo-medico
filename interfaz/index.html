<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kairos - Asistente MÃ©dico</title>
    <link rel="stylesheet" href="css/kairos.css">
</head>
<body>
    <div id="app">
        <!-- Pantalla de Espera -->
        <div id="pantalla-espera" class="pantalla activa">
            <div class="logo-container">
                <div class="logo-pulse">
                    <h1 class="logo">ğŸ¤– KAIROS</h1>
                </div>
                <p class="subtitulo">Asistente MÃ©dico Natural</p>
            </div>
            
            <div class="mensaje-bienvenida">
                <h2>Â¿Tienes alguna molestia?</h2>
                <p>Â¡Puedo ayudarte GRATIS!</p>
            </div>
            
            <button class="btn-grande btn-empezar" onclick="iniciarConsulta()">
                ğŸ‘† TOCAR PARA EMPEZAR
            </button>
            
            <div class="contador-consultas">
                <p>Consultas hoy: <span id="contador-hoy">0</span></p>
            </div>
        </div>

        <!-- Captura de Datos -->
        <div id="pantalla-datos" class="pantalla">
            <div class="header">
                <h2>ğŸ“‹ Datos del Paciente</h2>
            </div>
            
            <div class="formulario">
                <div class="campo">
                    <label>ğŸ‘¤ Nombre Completo</label>
                    <input type="text" id="nombre" placeholder="Ej: MarÃ­a LÃ³pez GarcÃ­a">
                    <button class="btn-voz" onclick="dictarNombre()">ğŸ¤</button>
                </div>
                
                <div class="campo">
                    <label>ğŸ†” DNI (8 dÃ­gitos)</label>
                    <input type="text" id="dni" maxlength="8" placeholder="12345678">
                </div>
                
                <div class="campo">
                    <label>ğŸ“… Edad (opcional)</label>
                    <input type="number" id="edad" min="0" max="120" placeholder="32">
                </div>
                
                <div class="validacion" id="validacion"></div>
                
                <button class="btn-grande btn-continuar" onclick="capturarDatos()">
                    CONTINUAR â¡ï¸
                </button>
            </div>
        </div>

        <!-- Chat Conversacional -->
        <div id="pantalla-chat" class="pantalla">
            <div class="header-chat">
                <div class="info-paciente">
                    <span id="nombre-paciente"></span>
                    <span id="dni-paciente"></span>
                </div>
                <button class="btn-terminar" onclick="confirmarTerminar()">âŒ Terminar</button>
            </div>
            
            <div class="chat-container" id="chat-mensajes">
                <!-- Mensajes aquÃ­ -->
            </div>
            
            <div class="input-container">
                <input type="text" id="mensaje-input" placeholder="Escribe tu respuesta..." 
                       onkeypress="if(event.key==='Enter') enviarMensaje()">
                <button class="btn-voz-chat" onclick="toggleVoz()">ğŸ¤</button>
                <button class="btn-enviar" onclick="enviarMensaje()">ğŸ“¤</button>
            </div>
            
            <div class="indicador-escribiendo" id="escribiendo" style="display: none;">
                <span class="dots">Kairos estÃ¡ escribiendo<span>.</span><span>.</span><span>.</span></span>
            </div>
        </div>

        <!-- Generando Receta -->
        <div id="pantalla-generando" class="pantalla">
            <div class="loading-container">
                <div class="spinner"></div>
                <h2>ğŸ§  Analizando tu caso...</h2>
                <div class="progreso">
                    <div class="paso activo">âœ… DiagnÃ³stico completado</div>
                    <div class="paso" id="paso-productos">ğŸ”„ Seleccionando productos...</div>
                    <div class="paso" id="paso-receta">â³ Generando receta...</div>
                    <div class="paso" id="paso-impresion">â³ Preparando impresiÃ³n...</div>
                </div>
                <p class="mensaje-espera">Por favor espera un momento</p>
            </div>
        </div>

        <!-- Imprimiendo -->
        <div id="pantalla-imprimiendo" class="pantalla">
            <div class="impresion-container">
                <div class="printer-animation">ğŸ–¨ï¸</div>
                <h2>Imprimiendo tu receta...</h2>
                <div class="progreso-barra">
                    <div class="barra" id="barra-impresion"></div>
                </div>
                <p class="mensaje-recoge">Â¡Recoge tu ticket abajo! â¬‡ï¸</p>
            </div>
        </div>

        <!-- Despedida -->
        <div id="pantalla-despedida" class="pantalla">
            <div class="despedida-container">
                <div class="icono-exito">âœ…</div>
                <h2>Â¡Gracias <span id="nombre-despedida"></span>!</h2>
                
                <div class="resumen">
                    <h3>Tu receta incluye:</h3>
                    <ul>
                        <li>âœ… DiagnÃ³stico completo</li>
                        <li>âœ… Productos recomendados</li>
                        <li>âœ… Instrucciones de uso</li>
                        <li>âœ… Consejos de alimentaciÃ³n</li>
                    </ul>
                </div>
                
                <div class="mensaje-final">
                    <p>Â¡Que te mejores pronto! ğŸ’š</p>
                </div>
                
                <div class="contador-regreso">
                    Volviendo al inicio en <span id="contador">5</span> segundos...
                </div>
            </div>
        </div>

        <!-- Error -->
        <div id="pantalla-error" class="pantalla">
            <div class="error-container">
                <div class="icono-error">âš ï¸</div>
                <h2>Ups, algo saliÃ³ mal</h2>
                <p id="mensaje-error"></p>
                <button class="btn-grande" onclick="volverInicio()">Volver al inicio</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/voice.js"></script>
    <script src="js/app.js"></script>
</body>
</html>